# å‰ç½®çŸ¥è¯†

> æœ¬é¡µ**æ‰€æœ‰é***å†…å®¹éƒ½æ˜¯å­¦ä¹ æ•°æ®ç»“æ„æ‰€å¿…é¡»çš„çŸ¥è¯†ï¼Œè¯·è¯»è€…ä¸€å®šæ³¨æ„ã€‚

##  æŒ‡é’ˆä¸ç»“æ„ä½“

æŒ‡é’ˆä¹Ÿå°±æ˜¯å†…å­˜åœ°å€ï¼ŒæŒ‡é’ˆå˜é‡æ˜¯ç”¨æ¥å­˜æ”¾å†…å­˜åœ°å€çš„**å˜é‡**ã€‚

[æŒ‡é’ˆ - ã€Šé˜®ä¸€å³°ã€ŠC è¯­è¨€æ•™ç¨‹ã€‹ã€‹ - ä¹¦æ ˆç½‘ Â· BookStack](https://www.bookstack.cn/read/wangdoc-clang-tutorial/docs-pointer.md)

[C æŒ‡é’ˆ | èœé¸Ÿæ•™ç¨‹ (runoob.com)](https://www.runoob.com/cprogramming/c-pointers.html)

**ç»“æ„**æ˜¯ C ç¼–ç¨‹ä¸­å¦ä¸€ç§ç”¨æˆ·è‡ªå®šä¹‰çš„å¯ç”¨çš„æ•°æ®ç±»å‹ï¼Œå®ƒå…è®¸æ‚¨å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®é¡¹ã€‚

[struct ç»“æ„ - ã€Šé˜®ä¸€å³°ã€ŠC è¯­è¨€æ•™ç¨‹ã€‹ã€‹ - ä¹¦æ ˆç½‘ Â· BookStack](https://www.bookstack.cn/read/wangdoc-clang-tutorial/docs-struct.md)

[C ç»“æ„ä½“ | èœé¸Ÿæ•™ç¨‹ (runoob.com)](https://www.runoob.com/cprogramming/c-structures.html)

!> ä¸å¤šèµ˜è¿°ï¼Œä½†æ˜¯æŒ‡é’ˆå’Œç»“æ„ä½“æ˜¯æ•°æ®ç»“æ„çš„åŸºç¡€ï¼Œæ˜¯**ä¸€å®šè¦æŒæ¡çš„å†…å®¹**ï¼Œè‹¥å®åœ¨æ˜¯æƒ³ä¸èµ·æ¥ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹è§†é¢‘

[å—äº¬å¤§å­¦-Cç¨‹åºè®¾è®¡åŸºç¡€-W9æŒ‡é’ˆ1_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV17K41187Dp/?spm_id_from=333.788&vd_source=3310f07bcb7152dc48cc5e65834e98b5)

> éœ€è¦åˆ°è¾¾ä»€ä¹ˆæ°´å¹³ï¼Ÿ
>
> A: å®Œå…¨ç‹¬ç«‹ï¼ˆä¸å€ŸåŠ©å‚è€ƒï¼‰
>
> 1. å£°æ˜å’Œä½¿ç”¨ï¼ˆæ•´æ•°ç­‰ï¼‰æŒ‡é’ˆ æŒæ¡ä½¿ç”¨`*`å’Œ `&`ç­‰ç¬¦å·è®¿é—®ã€ä¿®æ”¹æŒ‡é’ˆå˜é‡ï¼Œ
> 2. å£°æ˜å’Œä½¿ç”¨ ç»“æ„ä½“ã€ç»“æ„ä½“å˜é‡ï¼Œ æŒæ¡ `->`å’Œ`.`ç¬¦å·è®¿é—®ç»“æ„ä½“å˜é‡ã€å‡½æ•°
> 3. æŒæ¡ æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°çš„å‡½æ•°ä»¥åŠå‡½æ•°çš„ å£°æ˜ã€å®šä¹‰ã€ä½¿ç”¨

æ£€æµ‹ä¸€ä¸‹ï¼š

```c++
#include <iostream>

int main()
{
    int* a;
    int b = 50;
    a = &b;
    std::cout << a << " " << &a << " " << *a << " " << b << " " << &b <<std::endl;
}
```

æ±‚æ‰“å°å†…å®¹ã€‚

## æ•°æ®ç»“æ„ä¸­ä½¿ç”¨çš„å…³é”®å­—å’Œå‡½æ•°

## * ç®—æ³•

å½“æˆ‘ä»¬å¬åˆ°â€œç®—æ³•â€è¿™ä¸ªè¯æ—¶ï¼Œå¾ˆè‡ªç„¶åœ°ä¼šæƒ³åˆ°æ•°å­¦ã€‚ç„¶è€Œå®é™…ä¸Šï¼Œè®¸å¤šç®—æ³•å¹¶ä¸æ¶‰åŠå¤æ‚æ•°å­¦ï¼Œè€Œæ˜¯æ›´å¤šåœ°ä¾èµ–åŸºæœ¬é€»è¾‘ï¼Œè¿™äº›é€»è¾‘åœ¨æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ä¸­å¤„å¤„å¯è§ã€‚

åœ¨æ­£å¼æ¢è®¨ç®—æ³•ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªæœ‰è¶£çš„äº‹å®å€¼å¾—åˆ†äº«ï¼š**ä½ å·²ç»åœ¨ä¸çŸ¥ä¸è§‰ä¸­å­¦ä¼šäº†è®¸å¤šç®—æ³•ï¼Œå¹¶ä¹ æƒ¯å°†å®ƒä»¬åº”ç”¨åˆ°æ—¥å¸¸ç”Ÿæ´»ä¸­äº†**ã€‚ä¸‹é¢æˆ‘å°†ä¸¾å‡ ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯å®è¿™ä¸€ç‚¹ã€‚

**ä¾‹ï¼šæŸ¥å­—å…¸**ã€‚åœ¨å­—å…¸é‡Œï¼Œæ¯ä¸ªæ±‰å­—éƒ½å¯¹åº”ä¸€ä¸ªæ‹¼éŸ³ï¼Œè€Œå­—å…¸æ˜¯æŒ‰ç…§æ‹¼éŸ³å­—æ¯é¡ºåºæ’åˆ—çš„ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ä¸€ä¸ªæ‹¼éŸ³é¦–å­—æ¯ä¸º ğ‘Ÿ çš„å­—ï¼Œé€šå¸¸ä¼šæŒ‰ç…§å›¾ 1-1 æ‰€ç¤ºçš„æ–¹å¼å®ç°ã€‚

1. ç¿»å¼€å­—å…¸çº¦ä¸€åŠçš„é¡µæ•°ï¼ŒæŸ¥çœ‹è¯¥é¡µçš„é¦–å­—æ¯æ˜¯ä»€ä¹ˆï¼Œå‡è®¾é¦–å­—æ¯ä¸º ğ‘š ã€‚
2. ç”±äºåœ¨æ‹¼éŸ³å­—æ¯è¡¨ä¸­ ğ‘Ÿ ä½äº ğ‘š ä¹‹åï¼Œæ‰€ä»¥æ’é™¤å­—å…¸å‰åŠéƒ¨åˆ†ï¼ŒæŸ¥æ‰¾èŒƒå›´ç¼©å°åˆ°ååŠéƒ¨åˆ†ã€‚
3. ä¸æ–­é‡å¤æ­¥éª¤ `1.` å’Œ æ­¥éª¤ `2.` ï¼Œç›´è‡³æ‰¾åˆ°æ‹¼éŸ³é¦–å­—æ¯ä¸º ğ‘Ÿ çš„é¡µç ä¸ºæ­¢ã€‚

æŸ¥å­—å…¸è¿™ä¸ªå°å­¦ç”Ÿå¿…å¤‡æŠ€èƒ½ï¼Œå®é™…ä¸Šå°±æ˜¯è‘—åçš„â€œäºŒåˆ†æŸ¥æ‰¾â€ç®—æ³•ã€‚ä»æ•°æ®ç»“æ„çš„è§’åº¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå­—å…¸è§†ä¸ºä¸€ä¸ªå·²æ’åºçš„â€œæ•°ç»„â€ï¼›ä»ç®—æ³•çš„è§’åº¦ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°æŸ¥å­—å…¸çš„ä¸€ç³»åˆ—æ“ä½œçœ‹ä½œâ€œäºŒåˆ†æŸ¥æ‰¾â€ã€‚

## * è®¡ç®—æœºå­˜å‚¨è®¾å¤‡

è®¡ç®—æœºä¸­åŒ…æ‹¬ä¸‰ç§ç±»å‹çš„å­˜å‚¨è®¾å¤‡ï¼š**ç¡¬ç›˜ï¼ˆhard diskï¼‰ã€å†…å­˜ï¼ˆrandom-access memory, RAMï¼‰ã€ç¼“å­˜ï¼ˆcache memoryï¼‰**ã€‚ä¸‹è¡¨å±•ç¤ºäº†å®ƒä»¬åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­çš„ä¸åŒè§’è‰²å’Œæ€§èƒ½ç‰¹ç‚¹ã€‚

 è®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡

|        | ç¡¬ç›˜                                     | å†…å­˜                                   | ç¼“å­˜                                              |
| :----- | :--------------------------------------- | :------------------------------------- | :------------------------------------------------ |
| ç”¨é€”   | é•¿æœŸå­˜å‚¨æ•°æ®ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€ç¨‹åºã€æ–‡ä»¶ç­‰ | ä¸´æ—¶å­˜å‚¨å½“å‰è¿è¡Œçš„ç¨‹åºå’Œæ­£åœ¨å¤„ç†çš„æ•°æ® | å­˜å‚¨ç»å¸¸è®¿é—®çš„æ•°æ®å’ŒæŒ‡ä»¤ï¼Œå‡å°‘ CPU è®¿é—®å†…å­˜çš„æ¬¡æ•° |
| æ˜“å¤±æ€§ | æ–­ç”µåæ•°æ®ä¸ä¼šä¸¢å¤±                       | æ–­ç”µåæ•°æ®ä¼šä¸¢å¤±                       | æ–­ç”µåæ•°æ®ä¼šä¸¢å¤±                                  |
| å®¹é‡   | è¾ƒå¤§ï¼ŒTB çº§åˆ«                            | è¾ƒå°ï¼ŒGB çº§åˆ«                          | éå¸¸å°ï¼ŒMB çº§åˆ«                                   |
| é€Ÿåº¦   | è¾ƒæ…¢ï¼Œå‡ ç™¾åˆ°å‡ åƒ MB/s                    | è¾ƒå¿«ï¼Œå‡ å GB/s                        | éå¸¸å¿«ï¼Œå‡ ååˆ°å‡ ç™¾ GB/s                           |
| ä»·æ ¼   | è¾ƒä¾¿å®œï¼Œå‡ æ¯›åˆ°å‡ å…ƒ / GB                  | è¾ƒè´µï¼Œå‡ ååˆ°å‡ ç™¾å…ƒ / GB                | éå¸¸è´µï¼Œéš CPU æ‰“åŒ…è®¡ä»·                           |

æˆ‘ä»¬å¯ä»¥å°†è®¡ç®—æœºå­˜å‚¨ç³»ç»Ÿæƒ³è±¡ä¸ºå›¾æ‰€ç¤ºçš„é‡‘å­—å¡”ç»“æ„ã€‚è¶Šé è¿‘é‡‘å­—å¡”é¡¶ç«¯çš„å­˜å‚¨è®¾å¤‡çš„é€Ÿåº¦è¶Šå¿«ã€å®¹é‡è¶Šå°ã€æˆæœ¬è¶Šé«˜ã€‚è¿™ç§å¤šå±‚çº§çš„è®¾è®¡å¹¶éå¶ç„¶ï¼Œè€Œæ˜¯è®¡ç®—æœºç§‘å­¦å®¶å’Œå·¥ç¨‹å¸ˆä»¬ç»è¿‡æ·±æ€ç†Ÿè™‘çš„ç»“æœã€‚

- **ç¡¬ç›˜éš¾ä»¥è¢«å†…å­˜å–ä»£**ã€‚é¦–å…ˆï¼Œå†…å­˜ä¸­çš„æ•°æ®åœ¨æ–­ç”µåä¼šä¸¢å¤±ï¼Œå› æ­¤å®ƒä¸é€‚åˆé•¿æœŸå­˜å‚¨æ•°æ®ï¼›å…¶æ¬¡ï¼Œå†…å­˜çš„æˆæœ¬æ˜¯ç¡¬ç›˜çš„å‡ åå€ï¼Œè¿™ä½¿å¾—å®ƒéš¾ä»¥åœ¨æ¶ˆè´¹è€…å¸‚åœºæ™®åŠã€‚
- **ç¼“å­˜çš„å¤§å®¹é‡å’Œé«˜é€Ÿåº¦éš¾ä»¥å…¼å¾—**ã€‚éšç€ L1ã€L2ã€L3 ç¼“å­˜çš„å®¹é‡é€æ­¥å¢å¤§ï¼Œå…¶ç‰©ç†å°ºå¯¸ä¼šå˜å¤§ï¼Œä¸ CPU æ ¸å¿ƒä¹‹é—´çš„ç‰©ç†è·ç¦»ä¼šå˜è¿œï¼Œä»è€Œå¯¼è‡´æ•°æ®ä¼ è¾“æ—¶é—´å¢åŠ ï¼Œå…ƒç´ è®¿é—®å»¶è¿Ÿå˜é«˜ã€‚åœ¨å½“å‰æŠ€æœ¯ä¸‹ï¼Œå¤šå±‚çº§çš„ç¼“å­˜ç»“æ„æ˜¯å®¹é‡ã€é€Ÿåº¦å’Œæˆæœ¬ä¹‹é—´çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚

![è®¡ç®—æœºå­˜å‚¨ç³»ç»Ÿ](./01_assets/storage_pyramid.png)

è®¡ç®—æœºçš„å­˜å‚¨å±‚æ¬¡ç»“æ„ä½“ç°äº†é€Ÿåº¦ã€å®¹é‡å’Œæˆæœ¬ä¸‰è€…ä¹‹é—´çš„ç²¾å¦™å¹³è¡¡ã€‚å®é™…ä¸Šï¼Œè¿™ç§æƒè¡¡æ™®éå­˜åœ¨äºæ‰€æœ‰å·¥ä¸šé¢†åŸŸï¼Œå®ƒè¦æ±‚æˆ‘ä»¬åœ¨ä¸åŒçš„ä¼˜åŠ¿å’Œé™åˆ¶ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚

æ€»çš„æ¥è¯´ï¼Œ**ç¡¬ç›˜ç”¨äºé•¿æœŸå­˜å‚¨å¤§é‡æ•°æ®ï¼Œå†…å­˜ç”¨äºä¸´æ—¶å­˜å‚¨ç¨‹åºè¿è¡Œä¸­æ­£åœ¨å¤„ç†çš„æ•°æ®ï¼Œè€Œç¼“å­˜åˆ™ç”¨äºå­˜å‚¨ç»å¸¸è®¿é—®çš„æ•°æ®å’ŒæŒ‡ä»¤**ï¼Œä»¥æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ã€‚ä¸‰è€…å…±åŒåä½œï¼Œç¡®ä¿è®¡ç®—æœºç³»ç»Ÿé«˜æ•ˆè¿è¡Œã€‚

å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œæ•°æ®ä¼šä»ç¡¬ç›˜ä¸­è¢«è¯»å–åˆ°å†…å­˜ä¸­ï¼Œä¾› CPU è®¡ç®—ä½¿ç”¨ã€‚ç¼“å­˜å¯ä»¥çœ‹ä½œ CPU çš„ä¸€éƒ¨åˆ†ï¼Œ**å®ƒé€šè¿‡æ™ºèƒ½åœ°ä»å†…å­˜åŠ è½½æ•°æ®**ï¼Œç»™ CPU æä¾›é«˜é€Ÿçš„æ•°æ®è¯»å–ï¼Œä»è€Œæ˜¾è‘—æå‡ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘å¯¹è¾ƒæ…¢çš„å†…å­˜çš„ä¾èµ–ã€‚

![ç¡¬ç›˜ã€å†…å­˜å’Œç¼“å­˜ä¹‹é—´çš„æ•°æ®æµé€š](./01_assets/storage_pyramid.png)

#### æ•°æ®ç»“æ„çš„å†…å­˜æ•ˆç‡

åœ¨å†…å­˜ç©ºé—´åˆ©ç”¨æ–¹é¢ï¼Œæ•°ç»„å’Œé“¾è¡¨å„è‡ªå…·æœ‰ä¼˜åŠ¿å’Œå±€é™æ€§ã€‚

ä¸€æ–¹é¢ï¼Œ**å†…å­˜æ˜¯æœ‰é™çš„ï¼Œä¸”åŒä¸€å—å†…å­˜ä¸èƒ½è¢«å¤šä¸ªç¨‹åºå…±äº«**ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›æ•°æ®ç»“æ„èƒ½å¤Ÿå°½å¯èƒ½é«˜æ•ˆåœ°åˆ©ç”¨ç©ºé—´ã€‚æ•°ç»„çš„å…ƒç´ ç´§å¯†æ’åˆ—ï¼Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´æ¥å­˜å‚¨é“¾è¡¨èŠ‚ç‚¹é—´çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰ï¼Œå› æ­¤ç©ºé—´æ•ˆç‡æ›´é«˜ã€‚ç„¶è€Œï¼Œæ•°ç»„éœ€è¦ä¸€æ¬¡æ€§åˆ†é…è¶³å¤Ÿçš„è¿ç»­å†…å­˜ç©ºé—´ï¼Œè¿™å¯èƒ½å¯¼è‡´å†…å­˜æµªè´¹ï¼Œæ•°ç»„æ‰©å®¹ä¹Ÿéœ€è¦é¢å¤–çš„æ—¶é—´å’Œç©ºé—´æˆæœ¬ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œé“¾è¡¨ä»¥â€œèŠ‚ç‚¹â€ä¸ºå•ä½è¿›è¡ŒåŠ¨æ€å†…å­˜åˆ†é…å’Œå›æ”¶ï¼Œæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚

å¦ä¸€æ–¹é¢ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œ**éšç€åå¤ç”³è¯·ä¸é‡Šæ”¾å†…å­˜ï¼Œç©ºé—²å†…å­˜çš„ç¢ç‰‡åŒ–ç¨‹åº¦ä¼šè¶Šæ¥è¶Šé«˜**ï¼Œä»è€Œå¯¼è‡´å†…å­˜çš„åˆ©ç”¨æ•ˆç‡é™ä½ã€‚æ•°ç»„ç”±äºå…¶è¿ç»­çš„å­˜å‚¨æ–¹å¼ï¼Œç›¸å¯¹ä¸å®¹æ˜“å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–ã€‚ç›¸åï¼Œé“¾è¡¨çš„å…ƒç´ æ˜¯åˆ†æ•£å­˜å‚¨çš„ï¼Œåœ¨é¢‘ç¹çš„æ’å…¥ä¸åˆ é™¤æ“ä½œä¸­ï¼Œæ›´å®¹æ˜“å¯¼è‡´å†…å­˜ç¢ç‰‡åŒ–ã€‚
